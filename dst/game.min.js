function t(){this.decors=[];var t=60;for(let e=0;e<t;e++){let t=4e3*Math.random()-2e3,e=4e3*Math.random()-2e3;this.decors.push(new A(9,6,t,e,0,R.SMALLROCK))}numRocks=50;for(let e=0;e<t;e++){let t=4e3*Math.random()-2e3,e=4e3*Math.random()-2e3;this.decors.push(new A(14,10,t,e,0,R.BIGROCK))}t=30;for(let e=0;e<t;e++){let t=4e3*Math.random()-2e3,e=4e3*Math.random()-2e3;this.decors.push(new A(14,14,t,e,0,R.STUMP))}t=20;for(let e=0;e<t;e++){let t=4e3*Math.random()-2e3,e=4e3*Math.random()-2e3;this.decors.push(new A(10,9,t,e,0,R.BIGMUSH))}t=40;for(let e=0;e<t;e++){let t=4e3*Math.random()-2e3,e=4e3*Math.random()-2e3;this.decors.push(new A(7,7,t,e,0,R.SMALLMUSH))}this.update=function(t,e){this.decors.forEach(e=>{e.update(t)})}}function e(t){this.hero=t;this.enemies=[];for(let t=0;t<300;t++){let e=t/300*2*Math.PI,s=new i(13,16,R.ENEMY,t,300);s.e.x=this.hero.x+600*Math.cos(e),s.e.y=this.hero.y+600*Math.sin(e),this.enemies.push(s)}this.update=function(t,e){this.enemies.forEach(e=>{e.update(t,this.enemies),e.e.update(t)}),this.enemies=this.enemies.filter(function(t){return t.active})}}function i(t,e,i,s,h){this.active=!0,this.e=new A(12,16,0,0,0,i),this.speed=.8,this.angleOffset=2*Math.PI*(s/h),this.update=function(t,e){let i=this.steerFromNearbyMobs(e,60),s=pt.hero.e.x+50*Math.cos(this.angleOffset),h=pt.hero.e.y+50*Math.sin(this.angleOffset);this.e.x+=(s-this.e.x>0?this.speed:-this.speed)+i.x,this.e.y+=(h-this.e.y>0?this.speed:-this.speed)+i.y,this.e.isCollidingWith(pt.hero.e)&&(this.active=!1)},this.steerFromNearbyMobs=function(t,e){let i=0,s=0,h=0;for(let n=0;n<t.length;n++){let a=t[n],o=Math.sqrt(Math.pow(this.e.x-a.e.x,2)+Math.pow(this.e.y-a.e.y,2));a!==this&&o<e&&(i+=this.e.x-a.e.x,s+=this.e.y-a.e.y,h++)}h>0&&(i/=h,s/=h);let n=Math.sqrt(i*i+s*s);return n>0&&(i/=n,s/=n),{x:i,y:s}}}function h(t=0,e=0){this.x=t,this.y=e}var n=37,a=39,o=38,l=40,d=16,y=87,f=65,x=83,u=68,g=77,m=0,w=2,p=32,E=69,H=49,M=50,k=51,v=52,S=82,I=84;function A(t,e,i,h,n,a){this.type=a,this.width=t,this.height=e,this.mhWidth=t/-2,this.mhHeight=e/-2,this.mhWScld=t/-2,this.mhHScld=e/-2,this.hWidth=t/2,this.hHeight=e/2,this.cenX=i-this.mhWScld,this.cenY=h-this.mhHScld,this.angle=n,this.x=i,this.y=h,this.image=wt,this.alpha=1,this.isSolid=!1,this.flip=!1,this.sx=0,this.sy=0,this.move=function(){Xt()&&(this.x-=5),qt()&&(this.x+=5),$t()&&(this.y-=5),zt()&&(this.y+=5),this.x<-2e3&&(this.x=-2e3),this.x>2e3&&(this.x=2e3),this.y<-2e3&&(this.y=-2e3),this.y>2e3&&(this.y=2e3)},this.update=function(i){this.x=Math.floor(this.x),this.Y=Math.floor(this.Y),ctx.save(),ctx.translate(this.x,this.y),ctx.globalAlpha=this.alpha,img=this.image,s=this.scale,mhw=this.mhWidth,mhh=this.mhHeight,hw=this.hWidth,hh=this.hHeight,t=this.width,e=this.height,ctx.translate(pt.cam.x,pt.cam.y),this.flip?(this.type==R.HAIR2?ctx.translate(8.3*t,0):ctx.translate(-7*-t,0),ctx.scale(-It,It)):ctx.scale(It,It),ctx.drawImage(img,this.sx,this.sy,t,e,hw,hh,t,e),ctx.restore(),this.cenX=this.x-this.mhWScld,this.cenY=this.y-this.mhHScld},this.isCollidingWith=function(t){return!(this.x+this.width<t.x-t.width||this.x-this.width>t.x+t.width||this.y+this.height<t.y-t.height||this.y-this.height>t.y+t.height)},this.setType=function(){switch(this.alpha=1,this.sy=0,this.sx=0,this.type){case R.HERO:break;case R.ENEMY:case R.GRASS:this.sx=16;break;case R.SHIELD:this.sx=33;break;case R.HAIR1:this.sx=63,this.width=13,this.height=13;break;case R.HAIR2:this.sx=77,this.width=15,this.height=12;break;case R.HAIR3:this.sx=94,this.width=13,this.height=11;break;case R.HAIR4:this.sx=50,this.sy=12,this.width=11,this.height=8;break;case R.HEAD1:this.sx=2,this.sy=1;break;case R.HEAD2:this.sx=48,this.sy=1;break;case R.HEAD3:this.sx=11,this.sy=17;break;case R.HAND:this.sx=30,this.sy=9;break;case R.ARROW:this.sx=36,this.sy=3;break;case R.SMALLROCK:this.sx=24,this.sy=17;break;case R.BIGROCK:this.sx=35,this.sy=16;break;case R.STUMP:this.sx=23,this.sy=25;break;case R.SMALLMUSH:this.sy=32;break;case R.BIGMUSH:this.sy=20}this.hWidth=this.width/2,this.hHeight=this.height/2},this.setType()}function b(t,e,i,s,h,a){this.e=new A(16,16,0,0,0,R.HERO),this.hair=new A(13,13,0,0,0,R.HAIR1),this.head=new A(11,9,0,0,0,R.HEAD1),this.rHand=new A(4,4,0,0,0,R.HAND),this.lHand=new A(4,4,0,0,0,R.HAND),this.change=!1,this.handMovementPhase=0,this.update=function(t){switch(this.e.move(t),this.e.update(t),ht&&(pt.hero.e.flip=Ot.keys&&(Ot.keys[n]||Ot.keys[f]),pt.hero.hair.flip=Ot.keys&&(Ot.keys[n]||Ot.keys[f]),pt.hero.head.flip=Ot.keys&&(Ot.keys[n]||Ot.keys[f])),this.head.x=this.e.x+18,this.head.y=this.e.y+18,this.head.update(t),this.hair.type){case R.HAIR1:this.hair.x=this.e.x+8,this.hair.y=this.e.y-6;break;case R.HAIR2:this.hair.x=this.e.x-6,this.hair.y=this.e.y-8;break;case R.HAIR3:this.hair.x=this.e.x+10,this.hair.y=this.e.y+2;break;case R.HAIR4:this.hair.x=this.e.x+18,this.hair.y=this.e.y+20}this.change&&(this.hairChange=!1,this.head.setType(),this.hair.setType()),this.hair.update(t),this.handMovementPhase+=t;let e=3*Math.sin(2*this.handMovementPhase*Math.PI*.4);this.rHand.x=this.e.x+65,this.rHand.y=this.e.y+65+e,this.lHand.x=this.e.x+25,this.lHand.y=this.e.y+65+e,this.rHand.update(t),this.lHand.update(t)}}const R={AIR:0,GRASS:1,HERO:2,ENEMY:3,SHIELD:4,HAIR1:5,HAIR2:6,HAIR3:7,HAIR4:8,HAND:9,HEAD1:10,HEAD2:11,HEAD3:12,ARROW:13,SMALLROCK:14,BIGROCK:15,STUMP:16,BIGMUSH:17,SMALLMUSH:18};function L(t,e,i){angle=2*Math.PI*(e/i),e>=i&&(angle=2*Math.PI),t.beginPath(),t.fillStyle=1==Pt?"#a6f1c8":"#ffb3a6",t.moveTo(400,35),t.arc(400,35,30,0,2*Math.PI),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="white",t.moveTo(400,35),t.arc(400,35,30,-Math.PI/2,angle-Math.PI/2,!1),t.closePath(),t.fill(),t.beginPath(),t.moveTo(400,35),t.lineTo(400+30*Math.cos(angle-Math.PI/2),35+30*Math.sin(angle-Math.PI/2)),t.strokeStyle=1==Pt?"#589572":"#f8847c",t.lineWidth=3,t.stroke()}function D(t,e,i,s,h,n,a){t.save(),t.translate(0,a);t.fillStyle=h,t.fillRect(10,10,200,20);const o=200*(e/i);t.fillStyle=n,t.fillRect(12,12,196,16),t.fillStyle=s,t.fillRect(12,12,o-4,16),t.font="14px Arial",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle";t.fillText(`${e} / ${i}`,110,20),t.restore()}function C(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}function T(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function B(t){return new C(t.x,t.y,t.w,t.h)}function P(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.y+t.h>e.y}function W(t,e){this.x=t,this.y=e,this.set=function(t,e){this.x=t,this.y=e}}function O(t,e,i,s,h,n,a,o,c){t.save(),t.globalAlpha=c,t.translate(e,i),t.fillStyle=o,t.fillRect(s,h,n,a),t.restore()}function Y(t,e,i){return(1-i)*t+i*e}function G(t,e){return cenX=Math.floor(t/2),cenY=Math.floor(e/2),{x:16*(cenX-cenY)/2,y:16*(cenX+cenY)/2}}function N(t){const e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);return Math.round(e*t)}function K(t,e,i,s,h,n,a){t.save(),t.setTransform(1,0,0,1,0,0),t.globalAlpha=e,t.fillStyle=i,t.fillRect(s,h,n,a),t.restore()}function F(t,e,i,s,h,n,a){t.save(),t.setTransform(1,0,0,1,0,0),t.globalAlpha=e,t.font=i,t.fillStyle=s,t.fillText(h,n,a),t.restore()}function U(t,e,i,s,h){t.font=i;let n=s-t.measureText(e).width/2;X(t,1,i,"BLACK",e,n,h,12),F(t,1,i,"WHITE",e,n,h)}function X(t,e,i,s,h,n,a,o){t.save(),t.setTransform(1,0,0,1,0,0),t.globalAlpha=e,t.font=i,t.fillStyle=s,t.strokeStyle=s,t.lineWidth=o,t.strokeText(h,n,a),t.restore()}function q(t,e,i,s){let h=t/32,n=(e+2*i+s)/32*2,a=n-h,o=h+n;return r=Math.floor(a),c=Math.floor(o),$(r,c)}function $(t,e){return pt.level.tiles[e+pt.levels[pt.hero.e.curLevel].cols*t]}function z(t,e,i){let s=t.e.x>e.x?1:-1,h=t.e.y>e.y?1:-1;t.e.x+=s*i,t.e.y+=h*i}const J={0:[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]],1:[[0,0,1,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],2:[[1,1,1,1,1],[0,0,0,0,1],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1]],3:[[1,1,1,1,1],[0,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[1,1,1,1,1]],4:[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[0,0,0,0,1],[0,0,0,0,1]],5:[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[0,0,0,0,1],[1,1,1,1,1]],6:[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1]],7:[[1,1,1,1,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[0,1,0,0,0]],8:[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1]],9:[[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1],[0,0,0,0,1],[1,1,1,1,1]]};function j(t,e,i,s){for(let h=0;h<J[i].length;h++)for(let n=0;n<J[i][h].length;n++)1===J[i][h][n]&&(ctx.fillStyle="white",ctx.fillRect(t+n*s,e+h*s,s,s))}function Q(t){Ot.context.fillStyle="yellow",Ot.context.font="16px Arial",Ot.context.fillText("FPS: "+t.toFixed(2),Lt-100,20)}function V(t){Ot.context.fillStyle="white",Ot.context.font="16px Arial",Ot.context.fillText("Mobs: "+t,Lt-100,50)}function Z(t,e,i,s,h,n){ctx.save(),ctx.scale(3,3),ctx.shadowColor=1==n?"#3CB371":"#f67c84",ctx.shadowBlur=10,ctx.shadowOffsetX=5,ctx.shadowOffsetY=5,ctx.fillStyle="white",ctx.fill(),ctx.strokeStyle=1==n?"#3CB371":"#ffb3a6",ctx.lineWidth=4,ctx.stroke(),ctx.beginPath(),ctx.roundRect(50,45,150,90,40),ctx.stroke(),ctx.fill(),ctx.restore()}function _(t){this.hero=t,this.rotatingEntity=new A(8,8,0,0,0,R.SHIELD),this.spinningEntity=new A(4,4,0,0,0,R.SHIELD),this.chasingEntity=new A(8,8,0,0,0,R.SHIELD),this.helicalEntity=new A(8,8,0,0,0,R.SHIELD),this.figureEightEntity=new A(4,4,0,0,0,R.SHIELD),this.rotate=!1,this.spin=!1,this.chase=!1,this.loop=!1,this.update=function(t,e){if(this.rotate){let i=60,s=2,h=2*e*Math.PI/s;this.rotatingEntity.x=this.hero.x+32+i*Math.cos(h),this.rotatingEntity.y=this.hero.y+32+i*Math.sin(h),this.rotatingEntity.update(t)}if(this.spin){let i=60,s=2*e*Math.PI/.6;this.spinningEntity.x=this.rotatingEntity.x+16+i*Math.cos(s),this.spinningEntity.y=this.rotatingEntity.y+16+i*Math.sin(s),this.spinningEntity.update(t)}if(this.rotate){let e=.1,i=this.hero.x-this.chasingEntity.x,s=this.hero.y-this.chasingEntity.y;Math.sqrt(i*i+s*s)>1&&(this.chasingEntity.x+=e*i,this.chasingEntity.y+=e*s),this.chasingEntity.update(t)}if(this.loop){radius=80;let i=2,s=this.hero.x+32+radius*Math.sin(e*i),h=this.hero.y+50+radius*Math.sin(2*e*i);this.figureEightEntity.x=s,this.figureEightEntity.y=h,this.figureEightEntity.update(t)}}}function tt(){this.arrow=new A(11,12,100,60,0,R.ARROW);let t=0,e=0;this.update=function(i){let s=N(.05);Ot.clear(),ctx.save(),K(ctx,.8,"black",0,0,it,st);var h=["#a8f2cb","#88e4b0"];h=1==Pt?["#a8f2cb","#88e4b0"]:["#ffb3a6","#ff9e9a"];const n=Math.ceil(Math.sqrt(ctx.canvas.width**2+ctx.canvas.height**2)/50);for(let t=-n;t<n+10;t++)ctx.fillStyle=h[t%2],ctx.beginPath(),ctx.moveTo(50*t+e,0),ctx.lineTo(50*(t+1)+e,0),ctx.lineTo(50*(t+1)+e-ctx.canvas.height,ctx.canvas.height),ctx.lineTo(50*t+e-ctx.canvas.height,ctx.canvas.height),ctx.closePath(),ctx.fill();(e-=.5)<=-100&&(e=0);let a=`${s}px Arial`;if(X(ctx,1,a,"Black","GameDevJS 2024",30,.1*st,12),F(ctx,1,a,"WHITE","GameDevJS 2024 ",30,.1*st),a=`${s-15}px Arial`,t<=0&&($t()?(t=.3,nt--):zt()&&(t=.3,nt++),te()&&(Pt=(Pt+1)%2,t=.3)),nt=(nt+3)%3,Z(0,0,300,300,15,Pt),0==nt){if(this.arrow.y=100,X(ctx,1,a,"BLACK","Select Hair (Left / Right)",30,.2*st,6),F(ctx,1,a,"WHITE","Select Hair (Left / Right)",30,.2*st),(Xt()||qt())&&t<=0){t=.3;const e=[R.HAIR1,R.HAIR2,R.HAIR3,R.HAIR4];pt.hero.hair.type=e[(e.indexOf(pt.hero.hair.type)+1)%e.length],pt.hero.change=!0}}else if(1==nt){if(this.arrow.y=140,X(ctx,1,a,"BLACK","Select Head (Left / Right)",30,.2*st,6),F(ctx,1,a,"WHITE","Select Head (Left / Right)",30,.2*st),(Xt()||qt())&&t<=0){t=.3;const e=[R.HEAD1,R.HEAD2,R.HEAD3];pt.hero.head.type=e[(e.indexOf(pt.hero.head.type)+1)%e.length],pt.hero.change=!0,pt.hero.head.type==R.HEAD3||pt.hero.head.type==R.HEAD2?(pt.hero.rHand.sx=16,pt.hero.rHand.sy=28,pt.hero.lHand.sx=16,pt.hero.lHand.sy=28):(pt.hero.rHand.sx=30,pt.hero.rHand.sy=9,pt.hero.lHand.sx=30,pt.hero.lHand.sy=9)}}else 2==nt&&(this.arrow.y=170,X(ctx,1,a,"BLACK","Select Clothes (Left / Right)",30,.2*st,6),F(ctx,1,a,"WHITE","Select Clothes (Left / Right)",30,.2*st));t-=i,pt.hero.e.x=65,pt.hero.e.y=30,ctx.save(),ctx.scale(3,3),pt.hero.update(i),ctx.restore(),ctx.save(),ctx.scale(1.5,1.5),this.arrow.update(i),ctx.restore();let o=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);U(ctx,"Space to Start",a,it/2,o-30),Jt()&&(ht=!0)}}function et(){this.cam=new h,this.tips=!0,this.time=0,this.reset=!1,this.hero=new b(16,16,0,0,0,R.HERO),this.attacks=new _(this.hero),this.spawner=new e(this.hero.e),this.decor=new t,this.intro=new tt;let i=3,s=20,n=0;this.update=function(t,e=!1){var h=ctx.createLinearGradient(0,0,0,ctx.canvas.height);h.addColorStop(0,"#3CB371"),h.addColorStop(1,"#A6F1C8"),e?(this.cam.x=Y(350-this.hero.e.x,this.cam.x,.1),this.cam.y=Y(200-this.hero.e.y,this.cam.y,.1),rt+=t,Ot.clear(),ctx.fillStyle=h,ctx.fillRect(0,0,ctx.canvas.width,ctx.canvas.height),this.time+=t,this.decor.update(t),this.hero.update(t),i<=0?(this.spawner.update(t,this.time),this.attacks.update(t,this.time),L(ctx,rt,20),rt>=20&&(rt=0,i=3,this.spawner.enemies=[],0,this.hero.e.x=65,this.hero.e.y=30)):(i-=t,Math.ceil(i)!=n&&(s=20),s+=.3,n=Math.ceil(i),j(330,80,Math.ceil(i),s)),D(ctx,60,100,"#f68687","#a15156","#faf1f0",0),D(ctx,50,100,"#84e3b3","#589572","#f0faf7",30),V(this.spawner.enemies.length),Q(At)):this.intro.update(t)}}let it=window.innerWidth,st=window.innerHeight,ht=!1,nt=0,at=0,ot=Date.now(),ct=Date.now(),rt=0,lt=new W(0,0),dt=new W(0,0),yt=new C(0,0,0,0),ft=!1,xt=!1,ut=!1,gt=!1,mt=0,wt=new Image;wt.src="atlas.png";let pt=new et,Et=!1,Ht=!0,Mt=!1,kt=!1,vt=!1,St=.1,It=4,At=60,bt=0,Rt=0;var Lt=800,Dt=600,Ct=window.innerWidth,Tt=window.innerHeight,Bt=Math.max(Ct/Lt,Tt/Dt),Pt=1;function startGame(){Ot.start(),ie(this.ctx),Yt(),document.getElementById("gameControls").addEventListener("touchstart",t=>{t.preventDefault()},{passive:!1}),document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("gameControls");Wt()?t.style.display="block":t.style.display="none"})}function Wt(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}let Ot={canvas:document.createElement("canvas"),start:function(){this.canvas.width=Lt*Bt,this.canvas.height=Dt*Bt,this.context=this.canvas.getContext("2d"),this.context.scale(1,1),this.context.setTransform(Bt,0,0,Bt,0,0),ctx=this.context,ctx.mozImageSmoothingEnabled=!1,ctx.webkitImageSmoothingEnabled=!1,ctx.imageSmoothingEnabled=!1,this.canvas.classList.add("screen"),document.body.insertBefore(this.canvas,document.body.childNodes[6]),this.frameId=requestAnimationFrame(Ft),window.addEventListener("keydown",function(t){St<=0&&3==nt&&(Et=!0),t.preventDefault(),Ot.keys=Ot.keys||[],Ot.keys[t.keyCode]="keydown"==t.type}),window.addEventListener("keyup",function(t){Ot.keys[t.keyCode]="keydown"==t.type,t.keyCode==S&&(ut=!0),t.keyCode==g&&(Mt=!Mt),t.keyCode==I&&(pt.tips=!pt.tips)}),window.addEventListener("mouseup",function(t){t.preventDefault(),ee(),ft=!0,0===t.button?kt=!1:2===t.button&&(vt=!1)}),window.addEventListener("mousedown",function(t){t.preventDefault(),0===t.button?kt=!0:2===t.button&&(vt=!0)}),window.addEventListener("resize",ie),window.addEventListener("mousemove",function(t){t.preventDefault();var e=Ot.canvas.getBoundingClientRect();lt.set((t.clientX-e.left)/(e.right-e.left)*it,(t.clientY-e.top)/(e.bottom-e.top)*st)}),this.canvas.oncontextmenu=function(t){t.preventDefault()}},stop:function(){Ot.frameId&&(cancelAnimationFrame(Ot.frameId),Ot.frameId=null)},clear:function(){this.context.clearRect(0,0,4*this.canvas.width,4*this.canvas.height)}};function Yt(){document.getElementById("up").addEventListener("touchstart",()=>Gt("up")),document.getElementById("down").addEventListener("touchstart",()=>Gt("down")),document.getElementById("left").addEventListener("touchstart",()=>Gt("left")),document.getElementById("right").addEventListener("touchstart",()=>Gt("right")),document.getElementById("aButton").addEventListener("touchstart",()=>Nt("A")),document.getElementById("bButton").addEventListener("touchstart",()=>Nt("B"))}function Gt(t){console.log("Move:",t)}function Nt(t){console.log("Button pressed:",t)}let Kt=null;function Ft(t){Kt||(Kt=t);let e=(t-Kt)/1e3;Kt=t,bt++,(Rt+=e)>=1&&(At=bt/Rt,bt=0,Rt=0),Ut(e),Q(At),Ot.frameId=requestAnimationFrame(Ft)}function Ut(t){xt&&(rt=0,xt=!1,gt=!1,mt=0,Et=!1,ht=!1,St=3),Et&&(ht=!0),St>0&&(St-=t),pt.update(t,ht),ft=!1}function Xt(){return Ot.keys&&(Ot.keys[n]||Ot.keys[f])}function qt(){return Ot.keys&&(Ot.keys[a]||Ot.keys[u])}function $t(){return Ot.keys&&(Ot.keys[o]||Ot.keys[y])}function zt(){return Ot.keys&&(Ot.keys[l]||Ot.keys[x])}function Jt(){return Ot.keys&&Ot.keys[p]||kt}function jt(){return Ot.keys&&Ot.keys[d]||vt}function Qt(){return Ot.keys&&Ot.keys[H]}function Vt(){return Ot.keys&&Ot.keys[M]}function Zt(){return Ot.keys&&Ot.keys[k]}function _t(){return Ot.keys&&Ot.keys[v]}function te(){return Ot.keys&&Ot.keys[I]}function ee(){dt.set(lt.x,lt.y),yt.x=lt.x-5,yt.y=lt.y+5,yt.h=10,yt.w=10,console.log(dt)}function ie(){Ct=window.innerWidth,Tt=window.innerHeight,it=window.innerWidth,st=window.innerHeight,Bt=Math.max(Ct/Lt,Tt/Dt),scaleFitNative=Math.min(Ct/Lt,Tt/Dt),ctx.canvas.width=Lt*Bt,ctx.canvas.height=Dt*Bt,this.context=ctx.canvas.getContext("2d"),this.context.setTransform(Bt,0,0,Bt,0,0),this.ctx.mozImageSmoothingEnabled=!1,this.ctx.webkitImageSmoothingEnabled=!1,this.ctx.imageSmoothingEnabled=!1}